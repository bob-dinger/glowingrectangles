<template>
  <div>
    <svg
      height="512"
      viewBox="0 0 512 512"
      width="512"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g id="Layer_1" data-name="Layer 1">
        <path
          d="m321.838 152.309a65.838 65.838 0 1 1 -65.838-65.838 65.838 65.838 0 0 1 65.838 65.838z"
          fill="#ffdf40"
        />
        <path
          d="m321.838 152.309a65.838 65.838 0 0 1 -65.829 65.837v-131.674a65.838 65.838 0 0 1 65.829 65.837z"
          fill="#ffbe40"
        />
        <path
          d="m318.722 30.175a14.02 14.02 0 1 1 -14.022-14.02 14.02 14.02 0 0 1 14.022 14.02z"
          fill="#ffbe40"
        />
        <path
          d="m207.3 16.155a14.02 14.02 0 1 1 -14.019 14.02 14.02 14.02 0 0 1 14.019-14.02z"
          fill="#ffdf40"
        />
        <path d="m270.026 432.57-14.026 63.275-14.641-63.275z" fill="#ffdf40" />
        <path d="m270.027 432.57-14.018 63.235v-63.235z" fill="#ffbe40" />
        <path
          d="m255.759 441.443c-63.986-.085-95.759-77.013-95.659-136.427s32.15-136.257 96.136-136.172 95.764 77.012 95.664 136.426-32.156 136.258-96.141 136.173z"
          fill="#68544f"
        />
        <path
          d="m351.9 305.27c-.105 59.337-32.07 136.052-95.888 136.168v-272.59h.229c63.983.081 95.759 77.008 95.659 136.422z"
          fill="#53433f"
        />
        <path
          d="m348.521 339.624a178.145 178.145 0 0 1 -16.673 48.8c-45.859-18.489-101.64-23.847-151.851.061a178.068 178.068 0 0 1 -16.741-49.673q92.638-31.3 184.872 0zm1.992-56.655a185.522 185.522 0 0 0 -15.289-54.63c-55.491-20.294-108.115-19.293-158.276 0a185.831 185.831 0 0 0 -15.414 54.628q94.934-31.108 188.979.002z"
          fill="#ffdf40"
        />
        <path
          d="m256.009 213.507c25.754.113 52.143 4.931 79.215 14.832a185.522 185.522 0 0 1 15.289 54.63 300.17 300.17 0 0 0 -94.5-15.516zm0 109.624v49.408c26.49.461 52.455 6.46 75.839 15.888a178.145 178.145 0 0 0 16.673-48.8l-.392-.811a284.33 284.33 0 0 0 -92.12-15.685z"
          fill="#ffbe40"
        />
        <path
          d="m271.919 266.023c34.861-22.533 110.381-15.69 148.809 6.477s53.331 54.641 32.592 90.6-56.331 39.343-94.755 17.181-88.693-72.799-86.646-114.258z"
          fill="#bfbfbf"
        />
        <path
          d="m153.435 380.275c-38.424 22.162-74.016 18.776-94.755-17.181s-5.832-68.438 32.592-90.6 113.948-29 148.809-6.472c2.047 41.46-48.221 92.091-86.646 114.253z"
          fill="#ececec"
        />
        <path
          d="m271.919 266.023c-2.617-52.076 54.068-121.488 102.31-149.369s92.938-23.7 119.03 21.449 7.419 85.99-40.823 113.871-136.701 42.316-180.517 14.049z"
          fill="#e6e6e6"
        />
        <path
          d="m59.564 251.974c-48.242-27.881-66.914-68.726-40.823-113.874s70.789-49.33 119.03-21.449 104.929 97.296 102.31 149.372c-43.816 28.267-132.274 13.833-180.517-14.049z"
          fill="#f5f5f5"
        />
        <path
          d="m497.588 132.41c-13.292-23-32.229-37.019-54.765-40.547-21.211-3.322-45.8 2.651-71.1 17.271-14.951 8.641-30.588 21.117-45.033 35.666a70.949 70.949 0 0 0 -39.645-59.337c3.361-12.05 8.094-20.032 14.471-30.771.465-.784.94-1.585 1.42-2.4.581.054 1.168.089 1.763.089a19.089 19.089 0 1 0 -11.241-3.712l-.541.913c-6.353 10.7-11.5 19.382-15.193 32.117a70.672 70.672 0 0 0 -43.456 0c-3.7-12.735-8.84-21.418-15.193-32.117l-.541-.913a18.984 18.984 0 1 0 -11.234 3.716c.595 0 1.182-.035 1.763-.089.48.811.955 1.612 1.42 2.4 6.377 10.739 11.11 18.721 14.471 30.771a70.949 70.949 0 0 0 -39.648 59.333c-14.445-14.549-30.082-27.025-45.033-35.666-25.3-14.62-49.881-20.593-71.1-17.271-22.532 3.528-41.473 17.549-54.761 40.547s-15.989 46.412-7.8 67.706c7.71 20.051 25.157 38.377 50.451 53a194.946 194.946 0 0 0 29.014 13.473c-18.892 11.466-31.993 25.605-37.951 41.044-6.652 17.239-4.5 36.179 6.225 54.772s26.042 29.946 44.3 32.826a61.577 61.577 0 0 0 9.595.735c14.753 0 31.042-4.943 47.693-14.546 4.29-2.475 8.636-5.252 12.979-8.255 15.34 38.09 40.476 62.2 70.86 68.451a470.563 470.563 0 0 1 11.291 51.845 5 5 0 0 0 4.935 4.2 5 5 0 0 0 4.935-4.2c2.836-17.4 6.526-34.812 10.962-51.835 30.427-6.237 55.635-30.378 71.068-68.547 4.384 3.035 8.771 5.842 13.1 8.34 16.653 9.6 32.939 14.547 47.693 14.546a61.577 61.577 0 0 0 9.595-.735c18.254-2.88 33.572-14.231 44.3-32.826s12.877-37.533 6.225-54.772c-5.958-15.438-19.059-29.578-37.95-41.044a194.933 194.933 0 0 0 29.013-13.473c25.294-14.619 42.741-32.945 50.451-53 8.181-21.293 5.484-44.706-7.808-67.705zm-192.888-108.064a9.02 9.02 0 1 1 -9.019 9.02 9.03 9.03 0 0 1 9.019-9.02zm-106.426 9.02a9.02 9.02 0 1 1 9.02 9.019 9.03 9.03 0 0 1 -9.017-9.019zm-3.115 115.752a60.838 60.838 0 0 1 121.676 0 61.631 61.631 0 0 1 -.354 6.537c-5.426 6.092-10.593 12.441-15.392 18.939a78.276 78.276 0 0 0 -44.847-13.941h-.114a78.341 78.341 0 0 0 -45.128 14.063c-4.824-6.541-10.022-12.931-15.482-19.061a61.79 61.79 0 0 1 -.356-6.537zm49.829 120.382c7.328-.287 14.7-.291 22.023-.01 1.2 16.835 9.425 33.375 18.759 47.069a280.015 280.015 0 0 0 -59.519-.029c9.323-13.682 17.537-30.207 18.737-47.03zm21.855-10.023c-7.213-.262-14.469-.261-21.686.009.018-13.184-3.382-27.849-9.921-43.222a208.026 208.026 0 0 1 41.46.163c-6.496 15.313-9.869 29.918-9.853 43.053zm14.277-52.62a217.732 217.732 0 0 0 -50.33-.18 210.993 210.993 0 0 0 -14.019-23.8 68.581 68.581 0 0 1 39.362-12.228h.1a68.509 68.509 0 0 1 39.082 12.1 210.7 210.7 0 0 0 -14.195 24.111zm-258.05-69.443c15.974-27.64 37.047-36.59 57.655-36.59 20.466 0 40.474 8.837 54.545 16.968 48.256 27.89 100.373 93.952 99.895 142.2-41.584 24.512-124.848 12.349-173.1-15.537-28.235-16.32-70.848-51.926-38.995-107.041zm127.868 235.339c-18.348 10.582-35.891 14.937-50.733 12.6-15.386-2.427-27.9-11.829-37.193-27.944s-11.163-31.649-5.557-46.175c5.406-14.011 17.964-27.011 36.315-37.6 1.584-.914 3.264-1.815 5.011-2.69a272.042 272.042 0 0 0 52.175 10.89 230.966 230.966 0 0 0 24.3 1.328c23.418 0 43.818-3.984 59.5-11.641-2.38 19.466-15.382 38.887-26.668 52.478-15.755 18.976-37.12 37.201-57.15 48.754zm105.047 92.772q-2.5-11.632-5.425-22.464c1.719.112 3.446.189 5.192.191h.11c1.793 0 3.567-.078 5.332-.193q-2.82 11.148-5.209 22.466zm-.121-32.273h-.1c-34.328-.046-55.856-23.6-68.325-44.974a242.62 242.62 0 0 1 136.949-.048c-12.529 21.42-34.136 45.022-68.524 45.022zm73.37-54.028a252.673 252.673 0 0 0 -146.624.047c-2.181-4.434-3.95-8.583-5.349-12.18a241.035 241.035 0 0 0 38.521-36.7c.744-.9 1.5-1.822 2.251-2.764a270.141 270.141 0 0 1 75.97.044c.743.927 1.482 1.838 2.215 2.72a241.016 241.016 0 0 0 38.405 36.609c-1.411 3.611-3.193 7.774-5.389 12.224zm89-105.589c18.351 10.584 30.909 23.584 36.315 37.6 5.606 14.526 3.736 30.062-5.557 46.175s-21.807 25.517-37.193 27.944c-14.838 2.344-32.385-2.014-50.733-12.6-20.03-11.552-41.4-29.778-57.151-48.753-11.285-13.591-24.288-33.012-26.668-52.478 15.684 7.658 36.082 11.641 59.5 11.641a230.951 230.951 0 0 0 24.3-1.328 272.018 272.018 0 0 0 52.164-10.887c1.742.873 3.435 1.772 5.019 2.686zm31.7-29.181c-30.2 17.454-74.105 28.746-112.934 28.746-23.208 0-44.609-4.039-60.167-13.209-.478-48.247 51.639-114.309 99.9-142.2 28.236-16.318 80.362-35.469 112.2 19.622 31.85 55.116-10.763 90.722-38.999 107.041z"
        />
      </g>
    </svg>
  </div>
</template>

<script setup>
import { gsap } from "gsap";

onMounted(() => {
  let svg = document.querySelector("svg");
  gsap.set("#Layer_1", { scale: 0.2, transformOrigin: "center" });
  svg.addEventListener("click", function () {
    animate();
  });
});
const animate = () => {
  let svg = document.querySelector("svg");
  //gsap.set("#Layer_1", { scale: 0.2, transformOrigin: "center" });

  for (let l = 0; l < 50; l++) {
    // let beer = document.querySelector("#bee");
    // let beer2 = beer.cloneNode(true);
    // beer2.setAttribute("id", `bee_${l}`);
    // svg.appendChild(beer2);
    createParticle(l);
  }

  function createParticle(point) {
    // Create a new circle element
    const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");

    const bee = document.querySelector("#Layer_1");
    let pather = document.createElementNS("http://www.w3.org/2000/svg", "use");
    //pather.setAttributeNS()
    gsap.set("#path2", { scale: 0.2 });
    pather.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", "#Layer_1");
    pather.setAttribute("id", `bee_${point}`);

    svg.appendChild(pather);

    // Animate the circle
    gsap.to(pather, {
      // Random cx based on its current position
      x: "+=random(-250,250)",
      // Random cy based on its current position
      y: "+=random(-250,250)",
      // Fade out
      opacity: 0,
      // Random duration for each circle
      duration: "random(1, 5)",
      // Prevent gsap from rounding the cx & cy values
      autoRound: false,
      // Once the animation is complete
      onComplete: () => {
        // Remove the SVG element from its parent
        svg.removeChild(pather);
      },
    });
  }
};
</script>

<style scoped>
svg {
  border: 1px solid navy;
  height: 400px;
  width: 400px;
}
</style>
