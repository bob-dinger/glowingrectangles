<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shore</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body {
            height: 100%;
            overflow: hidden;
        }
        body {
            background: #1a3a52;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: rgba(255,255,255,0.4);
            text-decoration: none;
            font-size: 13px;
            font-family: -apple-system, sans-serif;
            z-index: 100;
        }
        .back-link:hover { color: #fff; }

        .scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
        }

        /* Beach/sand on left */
        .sand {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 40%;
            background: linear-gradient(to right, #a89060 0%, #c2a878 100%);
        }

        /* Wet sand */
        .wet-sand {
            position: absolute;
            top: 0;
            height: 100%;
            background: linear-gradient(to right, #6d5a45 0%, #8b7355 100%);
        }

        /* Ocean on right */
        .water {
            position: absolute;
            top: 0;
            right: 0;
            height: 100%;
            width: 60%;
            background: linear-gradient(to left, #1a5070 0%, #2a6080 60%, #4a90b0 100%);
        }

        /* Foam edge */
        .foam {
            position: absolute;
            top: 0;
            height: 100%;
            width: 25px;
            background: linear-gradient(to left,
                transparent 0%,
                rgba(255,255,255,0.3) 30%,
                rgba(255,255,255,0.7) 60%,
                rgba(255,255,255,0.9) 100%
            );
        }

        /* Bubbles */
        .bubble {
            position: absolute;
            border-radius: 50%;
            background: rgba(255,255,255,0.6);
        }

        /* Wave edge SVG */
        .wave-edge {
            position: absolute;
            top: 0;
            height: 100%;
            width: 60px;
        }
        .wave-edge svg {
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body>
    <a href="../../index.html" class="back-link">‚Üê Back</a>

    <div class="scene">
        <div class="water"></div>
        <div class="sand"></div>
        <div class="wet-sand" id="wetSand"></div>
        <div class="wave-edge" id="waveEdge">
            <svg viewBox="0 0 60 100" preserveAspectRatio="none">
                <path id="wavePath" fill="#4a90b0"/>
            </svg>
        </div>
        <div class="foam" id="foam"></div>
    </div>

    <script>
        const foam = document.getElementById('foam');
        const wetSand = document.getElementById('wetSand');
        const wavePath = document.getElementById('wavePath');
        const waveEdge = document.getElementById('waveEdge');

        // Wave cycle timing
        const rushIn = 3000;
        const pause1 = 800;
        const pullBack = 4000;
        const pause2 = 1500;
        const cycle = rushIn + pause1 + pullBack + pause2;

        // Positions (% from left of screen)
        const lowTide = 55;       // water rests here (right side)
        const highTide = 25;      // rushes to here (toward left/beach)

        let startTime = performance.now();
        let currentWetMark = lowTide;

        // Create bubbles
        const bubbles = [];
        for (let i = 0; i < 40; i++) {
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            const size = 2 + Math.random() * 5;
            bubble.style.width = size + 'px';
            bubble.style.height = size + 'px';
            bubble.style.top = (Math.random() * 100) + '%';
            bubble.dataset.offset = Math.random() * Math.PI * 2;
            foam.appendChild(bubble);
            bubbles.push(bubble);
        }

        function easeOutQuad(t) {
            return t * (2 - t);
        }

        function easeInQuad(t) {
            return t * t;
        }

        function generateWaveEdge(time) {
            let d = 'M60,0 ';
            const segments = 50;

            for (let i = 0; i <= segments; i++) {
                const y = (i / segments) * 100;
                const wave1 = Math.sin(y * 0.15 + time * 2) * 8;
                const wave2 = Math.sin(y * 0.4 + time * 3) * 4;
                const wave3 = Math.sin(y * 0.08 + time * 1.2) * 10;
                const x = 30 + wave1 + wave2 + wave3;
                d += `L${x},${y} `;
            }

            d += 'L60,100 Z';
            return d;
        }

        function animate(currentTime) {
            const elapsed = (currentTime - startTime) % cycle;
            const time = currentTime * 0.001;

            let position;
            let phase;

            if (elapsed < rushIn) {
                // Rushing in (moving left toward beach)
                const t = elapsed / rushIn;
                position = lowTide - (lowTide - highTide) * easeOutQuad(t);
                phase = 'in';
            } else if (elapsed < rushIn + pause1) {
                position = highTide;
                phase = 'peak';
            } else if (elapsed < rushIn + pause1 + pullBack) {
                // Pulling back (moving right toward ocean)
                const t = (elapsed - rushIn - pause1) / pullBack;
                position = highTide + (lowTide - highTide) * easeInQuad(t);
                phase = 'out';
            } else {
                position = lowTide;
                phase = 'low';
            }

            // Wet sand mark
            if (position < currentWetMark) {
                currentWetMark = position;
            }
            if (phase === 'low') {
                currentWetMark = Math.min(lowTide, currentWetMark + 0.03);
            }

            // Position foam
            foam.style.left = position + '%';
            foam.style.opacity = phase === 'low' ? 0.4 : 1;

            // Animate bubbles
            bubbles.forEach((bubble) => {
                const offset = parseFloat(bubble.dataset.offset);
                const wobble = Math.sin(time * 4 + offset) * 8;
                bubble.style.transform = `translateY(${wobble}px)`;
                bubble.style.opacity = phase === 'low' ? 0.2 : (0.4 + Math.random() * 0.4);
            });

            // Wave edge
            waveEdge.style.left = (position - 3) + '%';
            wavePath.setAttribute('d', generateWaveEdge(time));

            // Wet sand
            wetSand.style.left = currentWetMark + '%';
            wetSand.style.width = (lowTide - currentWetMark + 5) + '%';

            requestAnimationFrame(animate);
        }

        animate(performance.now());
    </script>
</body>
</html>
